/*
* Copyright 2018 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/


(function (n) { function u(t, i, r) { if (t.length && !t.hasClass("slick-initialized") && t.find(".item-box").length != 0) { var u = {}; try { u = i == "category" ? JSON.parse(o) : JSON.parse(s) } catch (e) { console.log("Invalid category/product collection settings value!") } try { u.responsive = i == "category" ? JSON.parse(h) : JSON.parse(c) } catch (e) { console.log("Invalid category/product breakpoints setting value!") } t.on("init", function () { r && f(t, r); n.event.trigger({ type: "newProductsAddedToPageEvent" }) }); u.rtl = n("html").attr("dir") == "rtl"; t.slick(u) } } function f(t, i) { var u = n("img", t), r = u.length; r === 0 && i.find(".loading-overlay").fadeOut(); u.load(function () { r--; r <= 0 && i.find(".loading-overlay").fadeOut() }) } var i = n(window), t = n("#spc-slick-slider-settings"), r = t.attr("data-showitemsincarousel"), o = t.attr("data-slickcategorysettings"), s = t.attr("data-slickproductsettings"), h = t.attr("data-categoryresponsivebreakpoints"), c = t.attr("data-productresponsivebreakpoints"), l = function () { n(".spc-products[notLoaded], .spc-categories[notLoaded]").length === 0 && i.off("scroll.smart-products") }, e = function () { var t = i.scrollTop() + i.outerHeight(); n(".spc-products[notLoaded]").each(function () { var i = n(this); i.offset().top < t && (i.removeAttr("notLoaded"), i.find(".tab:first").click()) }); n(".spc-categories[notLoaded]").each(function () { var i = n(this); i.offset().top < t && (i.removeAttr("notLoaded"), n.ajax({ url: i.attr("data-getCategoryGroupInfoUrl"), type: "POST", data: { categoryId: parseInt(i.attr("data-categoryGroupId")) || 0 } }).done(function (t) { i.html(t); i.find(".navigation .tab:first-of-type").removeAttr("notLoaded").addClass("active"); i.find(".category-products .product-grid:first-of-type").addClass("active"); var f = i.find(".item-grid:first"); r && f.length && f.find(".item-box").length > 0 ? u(f, "category") : n.event.trigger({ type: "newProductsAddedToPageEvent" }) }).fail(function () { i.remove() })) }); l() }, a = function () { n(".spc-products .tab").off("click.smartproductcollections").on("click.smartproductcollections", function (t) { var i, s, e, o; (t.preventDefault(), i = n(this), s = parseInt(i.attr("data-tabId")), isNaN(s)) || (e = i.closest(".spc-products"), o = e.find('.spc-body .product-grid[data-tabId="' + s + '"]'), i.hasClass("loaded") ? (i.addClass("active").siblings(".tab").removeClass("active"), e.find('.spc-body .product-grid[data-tabId="' + s + '"]').addClass("active").siblings(".product-grid").removeClass("active"), o.find(".item-grid").hasClass("slick-initialized") && o.find(".item-grid").slick("setPosition")) : (i.addClass("loaded"), e.find(".loading-overlay").show(), n.ajax({ url: e.attr("data-getItemProductsUrl"), type: "POST", data: { id: s } }).done(function (t) { o.find(".item-grid").html(t); i.addClass("active").siblings(".tab").removeClass("active"); o.addClass("active").siblings(".product-grid").removeClass("active"); var s = o.find(".item-grid"); r && s.length && s.find(".item-box").length > 0 ? u(s, "product", e) : (f(o, e), n.event.trigger({ type: "newProductsAddedToPageEvent" })) }))) }); n(".spc-products").on("change", ".mobile-navigation select", function () { var t = n(this); t.closest(".spc-products").find('.navigation .tab[data-tabId="' + t.val() + '"]').click() }); n(".spc-categories").on("click", ".navigation .tab", function () { var e = n(this), o = parseInt(e.attr("data-tabId")) || 0, t = e.closest(".spc-categories"), s = parseInt(t.attr("data-categoryGroupId")) || 0, i = t.find('.category-products .product-grid[data-tabId="' + o + '"]'); e.is("[notLoaded]") ? (e.removeAttr("notLoaded"), t.find(".loading-overlay").show(), n.ajax({ url: t.attr("data-getItemProductsUrl"), type: "POST", data: { id: o, categoryId: s } }).done(function (o) { i.children(".item-grid").html(o); e.addClass("active").siblings(".tab").removeClass("active"); i.addClass("active").siblings(".product-grid").removeClass("active"); var s = i.find(".item-grid"); r && s.length && s.find(".item-box").length > 0 ? u(s, "category", t) : (f(i, t), n.event.trigger({ type: "newProductsAddedToPageEvent" })) })) : (e.addClass("active").siblings(".tab").removeClass("active"), i.addClass("active").siblings(".product-grid").removeClass("active"), i.find(".item-grid").hasClass("slick-initialized") && i.find(".item-grid").slick("setPosition")); t.find('.category-mobile-navigation-select option[value="' + o + '"]').attr("selected", "selected") }); n(".spc-categories").on("change", ".mobile-navigation select", function () { var t = n(this); t.closest(".spc-categories").find('.navigation .tab[data-tabId="' + t.val() + '"]').click() }) }; n(document).ready(function () { a(); setTimeout(e, 200); i.on("scroll.smart-products", e) }) })(jQuery);